# 栈

[leetcode20 有效的括号](https://leetcode-cn.com/problems/valid-parentheses/)

- 利用栈的特性进行计算

```js
var isValid = function(s) {
  const n = s.length;
  if (n % 2 === 1) {
    return false;
  }
  const map = {
    '}': '{',
    ']': '[',
    ')': '(',
  };
  const stack = [];
  s.split('').forEach(item => {
    if (map[item]) {
      if (stack.length !== 0 && stack[stack.length - 1] === map[item]) {
        stack.pop();
      } else {
        stack.push(item);
      }
    } else {
      stack.push(item);
    }
  });
  return !stack.length;
};
```

[leetcode224 基本计算器](https://leetcode-cn.com/problems/basic-calculator/)

- 简单的计算器只有 + - （ ）符号可以利用栈来化解括号

```js
var calculate = function(s) {
  const stack = [1];
  let sign = 1;
  const n = s.length;
  let i = 0;
  let ret = 0;
  while (i < n) {
    if (s[i] === ' ') {
      i++;
    } else if (s[i] === '+') {
      sign = stack[stack.length - 1];
      i++;
    } else if (s[i] === '-') {
      sign = -stack[stack.length - 1];
      i++;
    } else if (s[i] === '(') {
      stack.push(sign);
      i++;
    } else if (s[i] === ')') {
      stack.pop();
      i++;
    } else {
      let num = 0;
      while (i < n && !isNaN(Number(s[i])) && s[i] !== ' ') {
        num = num * 10 + s[i].charCodeAt() - '0'.charCodeAt();
        i++;
      }
      ret += sign * num;
    }
  }
  return ret;
};
```
